#!/usr/bin/env bash

set -e
STATE=0;

while [ "$#" -gt 0 ]
do
  case "$1" in
    --on | --enable ) STATE=1; shift ;;
    --off | --disable ) STATE=0; shift ;;
    -- ) shift; break ;;
    * ) break ;;
  esac
done

path_to_script_directory="$(dirname "$0")"
cd "$path_to_script_directory";


if [ $STATE -eq 1 ]; then
  docker compose exec -u root app-dev cp "/app/docker/php/config/php/xdebug.ini.template" "/usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini"
else
  docker compose exec -u root app-dev rm -f "/usr/local/etc/php/conf.d/docker-php-ext-xdebug.ini"
fi
